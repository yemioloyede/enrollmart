@model IEnumerable<EnrolTraining.Models.CourseType>

@{ 
    string allowed = ViewBag.CoursesAllowed;
}

<script>
    $("#alltoggle").click(function () {
        var $checkbox = $(this).parent().find(':checkbox');
        $checkbox.prop('checked', !$checkbox[0].checked);
    });
</script>

<div style="border:1px solid lightgray; padding:10px 10px 0px 10px; border-radius:5px; background-color:white">
    <label id="alltoggle" class="text-danger text-left" style="cursor: pointer;padding-bottom: 10px;">All On/Off </label><br />
    @foreach (var course in Model)
    {
        bool isChecked = allowed.Split(',').Contains(course.CourseTypeID.ToString());
        <div class="checkbox" style="padding-top: 0px;margin-bottom: 0px;padding-bottom: 0px;min-height: 0px;">
            <label>
                @if (isChecked)
                {
                    <input type="checkbox" value="@course.CourseTypeID" name="CoursesAllowedArray[]" style="margin-top:1px" checked="checked" />
                }
                else
                {
                    <input type="checkbox" value="@course.CourseTypeID" name="CoursesAllowedArray[]" style="margin-top:1px" />
                }
                @course.CourseName
            </label>
        </div>
    }
</div>

